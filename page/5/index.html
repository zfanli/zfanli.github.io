<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/icon-64.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/icon-32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/icon-16.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.loli.net/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css" integrity="sha256-2H3fkXt6FEmrReK448mDVGKb3WW2ZZw35gI7vqHOE4Y=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Mist","version":"8.7.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":true,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":null,"sidebar":"fadeInUp"}},"prism":true,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.7.0/source/js/config.min.js"></script>
<meta name="description" content="TOPICS 前端 ｜ Python ｜ Java 数据结构 ｜ 算法 用代码替代言语记录创作与学习的脚步">
<meta property="og:type" content="website">
<meta property="og:title" content="HOME">
<meta property="og:url" content="http://example.com/page/5/">
<meta property="og:site_name" content="HOME">
<meta property="og:description" content="TOPICS 前端 ｜ Python ｜ Java 数据结构 ｜ 算法 用代码替代言语记录创作与学习的脚步">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Richard Zen">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/page/5/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/5/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>HOME</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">HOME</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li>
  </ul>
</nav>



<div id="colorSwitcher" class="animated fadeIn">🌓</div>
<script>
  (function () {
    // define constants
    const DARK = "dark-scheme",
      LIGHT = "light-scheme",
      COLOR_SCHEME = "color-scheme",
      ROTATE = "switcher-rotate";

    // define targets
    const switcher = document.querySelector("#colorSwitcher"),
      body = document.body,
      isDark = window.matchMedia("(prefers-color-scheme: dark)").matches,
      stored = window.localStorage.getItem(COLOR_SCHEME);

    body.classList.add(stored ? stored : isDark ? DARK : LIGHT);

    // setup actions
    switcher.addEventListener("click", function () {
      let add = LIGHT;
      if (body.classList.contains(LIGHT)) {
        add = DARK;
      }
      // apply the new color scheme
      body.classList.remove(LIGHT, DARK);
      body.classList.add(add);
      window.localStorage.setItem(COLOR_SCHEME, add);
      if (switcher.classList.contains(ROTATE))
        switcher.classList.remove(ROTATE);
      else switcher.classList.add(ROTATE);
    });
  })();
</script>
<style>
  #colorSwitcher {
    cursor: pointer;
    border-radius: 2px;
    height: 37px;
    line-height: 37px;
    width: 42px;
    text-align: center;
    outline: none;
    font-size: 1.5rem;
    margin-left: auto;
    transition: all 0.25s ease-in-out;
    transform: rotate(0);
    user-select: none;
  }

  #colorSwitcher.switcher-rotate {
    transform: rotate(180deg);
  }

  @media (max-width: 767px) {
    #colorSwitcher {
      height: 37px;
      line-height: 37px;
      width: 42px;
      text-align: center;
      position: absolute;
      top: 10px;
      right: 20px;
    }
  }
</style>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-overview">
            <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Richard Zen"
      src="/images/icon-64.png">
  <p class="site-author-name" itemprop="name">Richard Zen</p>
  <div class="site-description" itemprop="description"><small><b>TOPICS</b></small><br>
前端 ｜ Python ｜ Java<br>
数据结构 ｜ 算法<br><br>
用代码替代言语<br>记录创作与学习的脚步<br><br>
</div>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/zfanli" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;zfanli" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:yourname@gmail.com" title="E-Mail → mailto:yourname@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



          </div>
        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/post/leetcode/318-Maximum-Product-of-Word-Lengths-Medium/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/icon-64.png">
      <meta itemprop="name" content="Richard Zen">
      <meta itemprop="description" content="<small><b>TOPICS</b></small><br>
前端 ｜ Python ｜ Java<br>
数据结构 ｜ 算法<br><br>
用代码替代言语<br>记录创作与学习的脚步<br><br>
">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HOME">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/leetcode/318-Maximum-Product-of-Word-Lengths-Medium/" class="post-title-link" itemprop="url">318. Maximum Product of Word Lengths (Medium)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-05-22 15:36:05" itemprop="dateModified" datetime="2021-05-22T15:36:05+08:00">2021-05-22</time>
      </span>

  
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>1.4k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>思路 1，找到所有组合求最大值，用一个帮助函数 <code>pair</code> 来帮助我们判断是否需要进行相乘。</p>
<pre class="language-python" data-language="python"><code class="language-python">class Solution:
    def maxProduct(self, words: List[str]) -&gt; int:
        def pair(w1, w2):
            for w in w1:
                if w in w2:
                    return False
            return True

        ans, n &#x3D; 0, len(words)
        for i in range(n):
            for j in range(i + 1, n):
                if pair(words[i], words[j]):
                    ans &#x3D; max(ans, len(words[i]) * len(words[j]))
        return ans</code></pre>

<p>思路 2，英文小写字母只有 26 位，设想我们有一个长度为 26 的二进制数字，按照顺序将每一位映射成一个字母，0 表示有这个字母，1 则表示没有，这就是位掩码。判断相同字符串经常用到位掩码操作，在计算机中位操作往往有更好的效率。要判断两个字符串是否有共同的字母，只需要将他们的位掩码进行 <code>&amp;</code> 操作，这样相同位存在 1 的情况就会让结果大于 0，相反如果没有任何一位存在两边都为 1 的情况，则结果一定是 0。所以我们仅在结果为 0 的时候去计算长度相乘。</p>
<pre class="language-python" data-language="python"><code class="language-python">class Solution:
    def maxProduct(self, words: List[str]) -&gt; int:
        bitmasks, ans &#x3D; &#123;&#125;, 0
        for w in words:
            bitmask &#x3D; 0
            for c in w:
                bitmask |&#x3D; 1 &lt;&lt; (ord(c) - ord(&#39;a&#39;))
            for k, v in bitmasks.items():
                if not bitmask &amp; k:
                    ans &#x3D; max(ans, len(w) * v)
            bitmasks[bitmask] &#x3D; max(len(w), bitmasks.get(bitmask, 0))
            # print(bitmask, ans)
        return ans</code></pre>

<p>另一种位掩码的实现，按照下标映射位掩码，省去了 HashMap。</p>
<pre class="language-java" data-language="java"><code class="language-java">class Solution &#123;
    public int maxProduct(String[] words) &#123;
        int[] bitmasks &#x3D; new int[words.length];
        for (int i &#x3D; 0; i &lt; words.length; i++) &#123;
            for (char c : words[i].toCharArray()) &#123;
                bitmasks[i] |&#x3D; 1 &lt;&lt; (c - &#39;a&#39;);
            &#125;
        &#125;
        int ans &#x3D; 0;
        for (int i &#x3D; 0; i &lt; words.length; i++) &#123;
            for (int j &#x3D; i + 1; j &lt; words.length; j++) &#123;
                if ((bitmasks[i] &amp; bitmasks[j]) &#x3D;&#x3D; 0) &#123;
                    ans &#x3D; Math.max(ans, words[i].length() * words[j].length());
                &#125;
            &#125;
        &#125;
        return ans;
    &#125;
&#125;</code></pre>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/post/leetcode/307-Range-Sum-Query-Mutable-Medium/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/icon-64.png">
      <meta itemprop="name" content="Richard Zen">
      <meta itemprop="description" content="<small><b>TOPICS</b></small><br>
前端 ｜ Python ｜ Java<br>
数据结构 ｜ 算法<br><br>
用代码替代言语<br>记录创作与学习的脚步<br><br>
">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HOME">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/leetcode/307-Range-Sum-Query-Mutable-Medium/" class="post-title-link" itemprop="url">307. Range Sum Query - Mutable (Medium)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-05-20 15:36:05" itemprop="dateModified" datetime="2021-05-20T15:36:05+08:00">2021-05-20</time>
      </span>

  
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>1.3k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>给定数组，可以更新元素，还要快速查询范围内的和、最大最小值，这是典型的 Segment Tree （线段树）的应用场景。</p>
<p>线段树可以用数组和 TreeNode 的结构表达。这里需要构建一个和线段树，方便起见用数组来表达线段树。</p>
<p><strong>Build Tree</strong></p>
<p>线段树是一个二叉树结构，在给定数组上构建一个线段树，最终节点数约等于原数组长度的 2 倍，所以我们准备一个原数组长度 2 倍的数组，将原数组的元素放在从 <code>n</code> 开始的后半段。</p>
<p>前半段从 <code>n - 1</code> 开始遍历到 <code>0</code>，每个位置的值等于 <code>2 * i</code> + <code>2 * i + 1</code>，即其左右节点的和。树的构建就完成了。</p>
<p><strong>Update Values</strong></p>
<p>更新线段树时，只需要更新从目标叶子节点开始到根节点的路径。</p>
<p>我们从叶子节点出发，用下标除以 2，更新每一个途径的节点，直到根节点，我们一共更新 log n 个元素。</p>
<p><strong>Range Sum Query</strong></p>
<p>查询给定范围的和，分左右边界进行讨论：</p>
<p>左边界：</p>
<ul>
<li>如果左边元素属于节点的 right child，这意味着它的父节点包含一个值在查询的范围之外，所以我们仅加上左边元素的值本身，然后将边界向右移动一位；</li>
<li>如果左边元素属于节点的 left child，我们查询它的父元素即可。</li>
</ul>
<p>右边界：</p>
<ul>
<li>相反，如果右边元素属于节点的 left child，我们仅加上元素本身的值，将边界向左移动一位；</li>
<li>如果右边元素属于节点的 right child，我们查询它的父元素。</li>
</ul>
<p>我们更新左右边界，重复这个过程直到左右边界接错开（left &gt; right），这时我们得到了答案。</p>
<pre class="language-python" data-language="python"><code class="language-python">class NumArray:

    def __init__(self, nums: List[int]):
        n &#x3D; len(nums)
        tree &#x3D; [0] * 2 * n
        for i in range(n):
            tree[i + n] &#x3D; nums[i]
        for i in range(n - 1, -1, -1):
            tree[i] &#x3D; tree[i * 2] + tree[i * 2 + 1]

        self.n &#x3D; n
        self.tree &#x3D; tree


    def update(self, index: int, val: int) -&gt; None:
        n, tree &#x3D; self.n, self.tree
        index +&#x3D; n
        tree[index] &#x3D; val
        while index !&#x3D; 0:
            index &#x2F;&#x2F;&#x3D; 2
            tree[index] &#x3D; tree[2 * index] + tree[2 * index + 1]


    def sumRange(self, left: int, right: int) -&gt; int:
        n, tree &#x3D; self.n, self.tree
        left +&#x3D; n
        right +&#x3D; n
        ans &#x3D; 0
        while left &lt;&#x3D; right:
            if left % 2 &#x3D;&#x3D; 1:
                ans +&#x3D; tree[left]
                left +&#x3D; 1
            if right % 2 &#x3D;&#x3D; 0:
                ans +&#x3D; tree[right]
                right -&#x3D; 1
            left &#x2F;&#x2F;&#x3D; 2
            right &#x2F;&#x2F;&#x3D; 2
        return ans</code></pre>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/post/leetcode/304-Range-Sum-Query-2D-Immutable-Medium/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/icon-64.png">
      <meta itemprop="name" content="Richard Zen">
      <meta itemprop="description" content="<small><b>TOPICS</b></small><br>
前端 ｜ Python ｜ Java<br>
数据结构 ｜ 算法<br><br>
用代码替代言语<br>记录创作与学习的脚步<br><br>
">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HOME">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/leetcode/304-Range-Sum-Query-2D-Immutable-Medium/" class="post-title-link" itemprop="url">304. Range Sum Query 2D - Immutable (Medium)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-05-18 15:36:05" itemprop="dateModified" datetime="2021-05-18T15:36:05+08:00">2021-05-18</time>
      </span>

  
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>694</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Topics:</p>
<p>DP.</p>
<p>类似 1074，先求 Prefix Sum，然后计算子矩阵和。</p>
<pre class="language-python" data-language="python"><code class="language-python">class NumMatrix:

    def __init__(self, matrix: List[List[int]]):
        m, n &#x3D; len(matrix), len(matrix[0])

        for j in range(1, n):
            matrix[0][j] +&#x3D; matrix[0][j - 1]

        for i in range(1, m):
            for j in range(n):
                if j &gt; 0:
                    matrix[i][j] +&#x3D; matrix[i][j - 1] - matrix[i - 1][j - 1]
                matrix[i][j] +&#x3D; matrix[i - 1][j]

        self._m &#x3D; matrix


    def sumRegion(self, row1: int, col1: int, row2: int, col2: int) -&gt; int:
        ans &#x3D; self._m[row2][col2]
        if row1 &gt; 0:
            ans -&#x3D; self._m[row1 - 1][col2]
        if col1 &gt; 0:
            ans -&#x3D; self._m[row2][col1 - 1]
        if row1 &gt; 0 and col1 &gt; 0:
            ans +&#x3D; self._m[row1 - 1][col1 - 1]
        return ans

# Your NumMatrix object will be instantiated and called as such:
# obj &#x3D; NumMatrix(matrix)
# param_1 &#x3D; obj.sumRegion(row1,col1,row2,col2)</code></pre>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/post/leetcode/303-Range-Sum-Query-Immutable-Easy/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/icon-64.png">
      <meta itemprop="name" content="Richard Zen">
      <meta itemprop="description" content="<small><b>TOPICS</b></small><br>
前端 ｜ Python ｜ Java<br>
数据结构 ｜ 算法<br><br>
用代码替代言语<br>记录创作与学习的脚步<br><br>
">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HOME">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/leetcode/303-Range-Sum-Query-Immutable-Easy/" class="post-title-link" itemprop="url">303. Range Sum Query - Immutable (Easy)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-05-16 15:36:05" itemprop="dateModified" datetime="2021-05-16T15:36:05+08:00">2021-05-16</time>
      </span>

  
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>295</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>前缀和，然后查询区间，最右减去最左，注意一个 index 的 offset。</p>
<p>查询 0 开始的范围，需要减去 -1 下标的和，这不合理，所以遇到 -1 可以选择重置为 0，但这不优雅。</p>
<p>通过向数组左端添加一个 0，可以避免处理 query 范围左端为 -1 的场景。</p>
<pre class="language-python" data-language="python"><code class="language-python">class NumArray:

    def __init__(self, nums: List[int]):
        self.q &#x3D; [0]
        for n in nums:
            self.q.append(self.q[-1] + n)


    def sumRange(self, left: int, right: int) -&gt; int:
        return self.q[right + 1] - self.q[left]</code></pre>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/post/leetcode/204-Count-Primes-Easy/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/icon-64.png">
      <meta itemprop="name" content="Richard Zen">
      <meta itemprop="description" content="<small><b>TOPICS</b></small><br>
前端 ｜ Python ｜ Java<br>
数据结构 ｜ 算法<br><br>
用代码替代言语<br>记录创作与学习的脚步<br><br>
">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HOME">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/leetcode/204-Count-Primes-Easy/" class="post-title-link" itemprop="url">204. Count Primes (Easy)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-05-14 15:36:05" itemprop="dateModified" datetime="2021-05-14T15:36:05+08:00">2021-05-14</time>
      </span>

  
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>249</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Topics:</p>
<p>Hash table, math.</p>
<pre class="language-python" data-language="python"><code class="language-python">class Solution:
    def countPrimes(self, n: int) -&gt; int:

        isprime &#x3D; [1] * n

        for i in range(2, int(math.sqrt(n)) + 1):
            if isprime[i] !&#x3D; 0:
                for j in range(i ** 2, n, i):
                    isprime[j] &#x3D; 0

        # 0 and 1 are not prime.
        ans &#x3D; sum(isprime) - 2
        return ans if ans &gt; 0 else 0</code></pre>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/post/leetcode/164-Maximum-Gap-Hard/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/icon-64.png">
      <meta itemprop="name" content="Richard Zen">
      <meta itemprop="description" content="<small><b>TOPICS</b></small><br>
前端 ｜ Python ｜ Java<br>
数据结构 ｜ 算法<br><br>
用代码替代言语<br>记录创作与学习的脚步<br><br>
">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HOME">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/leetcode/164-Maximum-Gap-Hard/" class="post-title-link" itemprop="url">164. Maximum Gap (Hard)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-05-12 15:36:05" itemprop="dateModified" datetime="2021-05-12T15:36:05+08:00">2021-05-12</time>
      </span>

  
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>1.1k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>桶排序实现常数 n 的 O(n)复杂度。</p>
<p>桶排序是指将数据划分为诺干子数组，称之为桶，在桶内使用一般排序算法（比如 O(n^2)的插入排序等）排序，等到每一个桶就完成各自的排序之后，将所有桶按照顺序组合起来，获得最终排序完成的数组。</p>
<p>这样做的优势，通过一个例子可以清晰的明白：我们有一个长度为 10 的数组需要排序；</p>
<ul>
<li>使用插入排序，O(n^2)的情况下最差的情况将进行 10*10=100 次操作；</li>
<li>使用桶排序，选择最大的桶将数组分为两个长度为 5 的子数组，分别应用排序，最差情况将进行 10（分桶）+5*5（插入排序）*2（2 个桶） =60 次操作。</li>
</ul>
<p>但是桶的尺寸为 2 对于这个场景并不是最优的选择，这个例子解释了就算用极限分桶，也比单独使用插入排序高效。</p>
<p>桶排序的重点在于决定桶的尺寸，这直接影响到排序效率，对于这道题来说，通过数学归纳可以得知，最大间距的最小可能应该是间距的平均值，而当所有数的间隔都是平均分布的时候才会遇到这个场景，比如 <code>[0, 5, 10, 15]</code>，其中总间距为最大值减去最小值，即 <code>15-0=15</code>，通过观察得知间距的数量为数组长度减去 <code>1</code>，即 <code>4-1=3</code>，那么平均间距为 <code>15/3=5</code>，对于这个数组来说，平均间距就是最大间距，但是一旦其中任何一个值变大或变小任意长度，比如 <code>[0, 4, 10, 15]</code>，第一个间距从 <code>5</code> 变为 <code>4</code>，就必定意味着第二个间距从 <code>5</code> 变为 <code>6</code>。</p>
<pre class="language-python" data-language="python"><code class="language-python">class Solution:
    def maximumGap(self, nums: List[int]) -&gt; int:
        ans, n, hi, lo &#x3D; 0, len(nums), max(nums), min(nums)
        if n &lt; 2: return 0
        # Set 1 for case that max gap less than its length.
        bsize &#x3D; (hi - lo) &#x2F;&#x2F; (n - 1) or 1
        buckets &#x3D; [[-1, -1] for _ in range((hi - lo) &#x2F;&#x2F; bsize + 1)]
        for x in nums:
            b &#x3D; (x - lo) &#x2F;&#x2F; bsize
            buckets[b][0] &#x3D; min(buckets[b][0], x) if buckets[b][0] !&#x3D; -1 else x
            buckets[b][1] &#x3D; max(buckets[b][1], x)
        prev &#x3D; buckets[0][1]
        for i in range(1, len(buckets)):
            if buckets[i][0] &#x3D;&#x3D; -1:
                continue
            ans &#x3D; max(ans, buckets[i][0] - prev)
            prev &#x3D; buckets[i][1]
        return ans</code></pre>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/post/leetcode/150-Evaluate-Reverse-Polish-Notation-Medium/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/icon-64.png">
      <meta itemprop="name" content="Richard Zen">
      <meta itemprop="description" content="<small><b>TOPICS</b></small><br>
前端 ｜ Python ｜ Java<br>
数据结构 ｜ 算法<br><br>
用代码替代言语<br>记录创作与学习的脚步<br><br>
">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HOME">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/leetcode/150-Evaluate-Reverse-Polish-Notation-Medium/" class="post-title-link" itemprop="url">150. Evaluate Reverse Polish Notation (Medium)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-05-10 15:36:05" itemprop="dateModified" datetime="2021-05-10T15:36:05+08:00">2021-05-10</time>
      </span>

  
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>586</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>反向波兰表示法是一种使用 Stack 达到方便计算目的的一种数学方法。</p>
<p>使用递归或 Stack 都能简单的完成计算。使用 Stack 为例，算法过程如下：</p>
<ul>
<li>遍历 tokens<ul>
<li>遇到数字则加到栈顶</li>
<li>遇到操作符和取出栈顶的 2 个数字做运算，运算结果放回栈顶</li>
</ul>
</li>
<li>最终栈中存在的元素就是答案</li>
</ul>
<pre class="language-python" data-language="python"><code class="language-python">class Solution:
    def evalRPN(self, tokens: List[str]) -&gt; int:
        stack &#x3D; []

        for t in tokens:
            if t not in &#123;&quot;+&quot;, &quot;-&quot;, &quot;*&quot;, &quot;&#x2F;&quot;&#125;:
                stack.append(int(t))
            else:
                right, left &#x3D; stack.pop(), stack.pop()
                # print(left, t, right)
                if t &#x3D;&#x3D; &#39;+&#39;:
                    stack.append(left + right)
                elif t &#x3D;&#x3D; &#39;-&#39;:
                    stack.append(left - right)
                elif t &#x3D;&#x3D; &#39;*&#39;:
                    stack.append(left * right)
                else:
                    stack.append(trunc(left &#x2F; right))

        return stack[0]</code></pre>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/post/leetcode/145-Binary-Tree-Postorder-Traversal-Easy/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/icon-64.png">
      <meta itemprop="name" content="Richard Zen">
      <meta itemprop="description" content="<small><b>TOPICS</b></small><br>
前端 ｜ Python ｜ Java<br>
数据结构 ｜ 算法<br><br>
用代码替代言语<br>记录创作与学习的脚步<br><br>
">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HOME">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/leetcode/145-Binary-Tree-Postorder-Traversal-Easy/" class="post-title-link" itemprop="url">145. Binary Tree Postorder Traversal (Easy)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-05-08 15:36:05" itemprop="dateModified" datetime="2021-05-08T15:36:05+08:00">2021-05-08</time>
      </span>

  
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>1.5k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>遍历树通常有三种方法，分别是前序遍历（pre-order traversal）、中序遍历（in-order traversal）和后序遍历（post-order traversal）。这道题是后序遍历。</p>
<p>思路 1，递归</p>
<p>三种递归遍历方式的区别仅在于处理的顺序。</p>
<pre class="language-python" data-language="python"><code class="language-python">class Solution:
    def postorderTraversal(self, root: TreeNode) -&gt; List[int]:
        ans &#x3D; []

        def traverse(node):
            if node is None:
                return
            traverse(node.left)
            traverse(node.right)
            ans.append(node.val)

        traverse(root)
        return ans</code></pre>

<p>思路 2，迭代遍历</p>
<p>后序遍历按照 left -&gt; right -&gt; root 的顺序遍历树，你会发现这和前序遍历相似，我们只需要将前序遍历方法中左右子节点的遍历顺序对调，并将其结果颠倒一下顺序，即可得到后序遍历的结果。</p>
<p>但是这样不够优雅。</p>
<p>我们延续 stack 的思路，通过观察我们知道要完成后序遍历，每次迭代过程中我们可以把当前节点、右节点、左节点按顺序放入 stack 中，针对当前节点，需要将其左右子节点置空表示已经遍历过。</p>
<p>我们的 Base Case 的条件是当前节点没有左右子节点，这表示该节点是叶子节点，或是已经遍历过的节点，针对这两种情况我们直接记录它的值。</p>
<p>重复这个过程，直到完成遍历。</p>
<pre class="language-python" data-language="python"><code class="language-python">class Solution:
    def postorderTraversal(self, root: TreeNode) -&gt; List[int]:
        ans, stack &#x3D; [], [root]

        while len(stack) &gt; 0:
            curr &#x3D; stack.pop()
            if not curr:
                continue
            left, right &#x3D; curr.left, curr.right
            if not left and not right:
                ans.append(curr.val)
                continue
            curr.left, curr.right &#x3D; None, None
            stack.append(curr)
            stack.append(right)
            stack.append(left)

        return ans</code></pre>

<p>思路 3，迭代遍历，基于中序迭代遍历优化</p>
<p>由于 root 的值是最后记录的，在当前节点存在右节点的情况，还需要将当前节点的右节点置空，重新存入 stack。在空间复杂度上比思路 2 而言没有太大优化。</p>
<p>这个思路下，我们先到达左节点的最下层左节点（即最后一个左节点，该节点的左节点为空），然后根据右节点发生下面分支：</p>
<ul>
<li>右节点不存在：The Base Case，这个节点是叶子节点或访问过的节点，记录它的值；</li>
<li>右节点存在：置空当前节点的右节点并存入 stack，将右节点标记为当前节点进入下一个迭代过程。</li>
</ul>
<pre class="language-python" data-language="python"><code class="language-python">class Solution:
    def postorderTraversal(self, root: TreeNode) -&gt; List[int]:
        ans, stack, curr &#x3D; [], [], root

        while curr or len(stack) &gt; 0:
            while curr:
                stack.append(curr)
                curr &#x3D; curr.left
            curr &#x3D; stack.pop()
            if curr.right:
                stack.append(curr)
                # 置空当前节点的右节点，标记右节点为当前节点
                curr.right, curr &#x3D; None, curr.right
                continue
            ans.append(curr.val)
            # 节点已经遍历完成，注意需要清空指针
            curr &#x3D; None

        return ans</code></pre>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/post/leetcode/144-Binary-Tree-Preorder-Traversal-Easy/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/icon-64.png">
      <meta itemprop="name" content="Richard Zen">
      <meta itemprop="description" content="<small><b>TOPICS</b></small><br>
前端 ｜ Python ｜ Java<br>
数据结构 ｜ 算法<br><br>
用代码替代言语<br>记录创作与学习的脚步<br><br>
">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HOME">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/leetcode/144-Binary-Tree-Preorder-Traversal-Easy/" class="post-title-link" itemprop="url">144. Binary Tree Preorder Traversal (Easy)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-05-06 15:36:05" itemprop="dateModified" datetime="2021-05-06T15:36:05+08:00">2021-05-06</time>
      </span>

  
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>615</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>遍历树有三种方法，分别是前序 pre-order、中序 in-order 和后序 post-order 遍历。这道题是前序遍历。</p>
<p>前序遍历的递归写法没有难度。</p>
<p>思路 1，递归</p>
<pre class="language-python" data-language="python"><code class="language-python">class Solution:
    def preorderTraversal(self, root: TreeNode) -&gt; List[int]:
        ans &#x3D; []

        def traverse(node):
            if node is None:
                return
            ans.append(node.val)
            traverse(node.left)
            traverse(node.right)

        traverse(root)
        return ans</code></pre>

<p>思路 2，遍历</p>
<p>使用 stack 或队列按顺序记录需要检查的节点，需要关注的是：</p>
<ul>
<li>stack 是先进后出，要保证先左后右的顺序，需要先放入右 child，再放入左 child；</li>
<li>队列是先进先出，按正常顺序放入左右 child 即可。</li>
</ul>
<pre class="language-python" data-language="python"><code class="language-python">class Solution:
    def preorderTraversal(self, root: TreeNode) -&gt; List[int]:
        ans, stack &#x3D; [], [root]

        while len(stack) &gt; 0:
            node &#x3D; stack.pop()
            if node is None:
                continue
            ans.append(node.val)
            stack.append(node.right)
            stack.append(node.left)

        return ans</code></pre>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/post/leetcode/135-Candy-Hard/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/icon-64.png">
      <meta itemprop="name" content="Richard Zen">
      <meta itemprop="description" content="<small><b>TOPICS</b></small><br>
前端 ｜ Python ｜ Java<br>
数据结构 ｜ 算法<br><br>
用代码替代言语<br>记录创作与学习的脚步<br><br>
">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HOME">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/leetcode/135-Candy-Hard/" class="post-title-link" itemprop="url">135. Candy (Hard)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-05-04 15:36:05" itemprop="dateModified" datetime="2021-05-04T15:36:05+08:00">2021-05-04</time>
      </span>

  
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>1.6k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>做完后才意识到是一道 hard 难度的题。</p>
</blockquote>
<p>思路 1，<del>野路子</del> 提取依赖。</p>
<p>最初的想法是根据左右位置的 <code>rating</code> 值决定当前位置的糖果数量，但是仅仅如此的话会由于无法预知后面的值是否被改变，从而造成漏算；要解决漏算，可以根据 <code>rating</code> 值计算出当前位置的糖果数量是否依赖左右的值，这样遍历一次列表之后我们就获得了所有位置的依赖。</p>
<p>接着我们准备一个递归函数来根据这些依赖，最终去计算糖果数量。</p>
<p>数据结构上，对于无依赖项，我们直接储存字面量（int），如果存在依赖则存入 list。</p>
<p>递归时，如果目标是字面量则直接返回，如果存在进一步的依赖则调用递归进一步计算。这样可以在 O(n) 时间内完成递归。</p>
<pre class="language-python" data-language="python"><code class="language-python">class Solution:
    def candy(self, ratings: List[int]) -&gt; int:
        n &#x3D; len(ratings)
        c &#x3D; [-1] * n
        for i in range(n):
            res &#x3D; []
            if i &gt; 0 and ratings[i - 1] &lt; ratings[i]:
                res.append(i - 1)
            if i &lt; n - 1 and ratings[i + 1] &lt; ratings[i]:
                res.append(i + 1)
            c[i] &#x3D; 1 if len(res) &#x3D;&#x3D; 0 else res

        def cal(idx):
            if type(c[idx]) &#x3D;&#x3D; int:
                return c[idx]
            res &#x3D; []
            for x in c[idx]:
                res.append(cal(x) + 1)
            c[idx] &#x3D; max(res)
            return c[idx]


        for i in range(n):
            cal(i)

        return sum(c)</code></pre>

<p>思路 2，双列表。</p>
<p>换一个角度看下思路一，我们能发现从左到右遍历列表时，我们无法预知右边的值是否会变动，但是我们知道左边的值都是看过的，不会发生变动。于是，我们可以准备另一个列表从右到左的遍历一次列表，这样我们就获得了一个能确保右边值都考虑到了的数据。</p>
<p>要保证每个位置的糖果都符合题目要求，我们需要对两个列表相同位置的糖果取最大值，结果将是我们的答案。</p>
<pre class="language-python" data-language="python"><code class="language-python">class Solution:
    def candy(self, ratings: List[int]) -&gt; int:
        n &#x3D; len(ratings)
        left, right &#x3D; [1] * n, [1] * n

        for i in range(n):
            if i &gt; 0 and ratings[i - 1] &lt; ratings[i]:
                left[i] &#x3D; left[i - 1] + 1

        for i in range(n - 1, -1, -1):
            if i &lt; n - 1 and ratings[i + 1] &lt; ratings[i]:
                right[i] &#x3D; right[i + 1] + 1

        ans &#x3D; 0
        for i in range(n):
            ans +&#x3D; max(left[i], right[i])

        return ans</code></pre>

<p>思路 3，单列表。思路 2 的优化版本，使用双列表时，实际上我们没有同时使用到它们，所以优化的思路就是在第二次遍历时对列表进行更新，而不是重新准备一个列表。</p>
<p>这样完成第二次遍历之后，列表的和就是答案。</p>
<pre class="language-python" data-language="python"><code class="language-python">class Solution:
    def candy(self, ratings: List[int]) -&gt; int:
        n &#x3D; len(ratings)
        c &#x3D; [1] * n

        for i in range(n):
            if i &gt; 0 and ratings[i - 1] &lt; ratings[i]:
                c[i] &#x3D; c[i - 1] + 1

        for i in range(n - 1, -1, -1):
            if i &lt; n - 1 and ratings[i + 1] &lt; ratings[i]:
                c[i] &#x3D; max(c[i], c[i + 1] + 1)

        return sum(c)</code></pre>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Richard Zen</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="站点总字数">80k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">1:13</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div><div class="powered-by">
  Powered by
  <a
    href="https://hexo.io"
    rel="noopener external nofollow noreferrer"
    target="_blank"
    class="exturl"
    title=""
  >
    Hexo
  </a>
  &amp; <a target="_blank" rel="noopener" href="https://theme-next.js.org/">NexT</a>
</div>


    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.24.1/components/prism-core.min.js" integrity="sha256-dz05jjFU9qYuMvQQlE6iWDtNAnEsmu6uMb1vWhKdkEM=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.24.1/plugins/autoloader/prism-autoloader.min.js" integrity="sha256-sttoa+EIAvFFfeeIkmPn8ypyOOb6no2sZ2NbxtBXgqU=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.7.0/source/js/comments.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.7.0/source/js/utils.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.7.0/source/js/motion.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.7.0/source/js/schemes/muse.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-next@8.7.0/source/js/next-boot.min.js"></script>

  




  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>





</body>
</html>
